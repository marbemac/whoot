<% unless @my_post == nil %>
  <div id="my-post" class="{{ myPost.invite.id is defined ? 'invite' : '' }}">
    <h3>
      <%= @my_post.night_type_short %>
    </h3>
    <% if @invite %>
      <div id="cancel-post">Cancel</div>
      <div class="hide">
        <div id="invite-cancel-confirm">
          <div class="num">
            <% if @invite.attending_count > 1 %>
              <%= @invite.attending_count - 1 %>
              people have indicated they are attending your open invite. The invite will be cancelled for them as well!
            <% else %>
              Looks like your invite wasn't very popular huh? Go ahead, cancel away...
            <% end %>
          </div>
          <div class="noundo">
            You cannot undo this action!
          </div>
          <div class="actions">
            <a class="submit ac" href="{{ path('invite_cancel') }}">Confirm Cancellation</a>

            <div class="cancel">Nevermind</div>
          </div>
        </div>
      </div>
    <% else %>
      <div id="change-post">Change</div>
    <% end %>

    <div class="clear"></div>

    <% if @invite %>
      <a href="<%= invite_post_path @invite %>">
        <% if @invite.user_id == @user.id %>
          You're inviting people out to <%= @invite.venue.name %>.
          <%= @invite.attending_count - 1 %> people are attending.
        <% else %>
          You're attending <%= @invite.user_snippet.fullname.pluralize %>
          open invite at <%= @invite.venue.name %>.
        <% end %>
      </a>
    <% else %>
      <div class="tags">
        <% @my_post.tags.each do |tag| %>
          <%= render "tags/teaser", :tag => tag %>
        <% end %>
      </div>
    <% end %>
  </div>
<% else %>
  <div id="my-post">
    <span id="declare-post"></span>
    You have not declared your post for the night.
  </div>
<% end %>